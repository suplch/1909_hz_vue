<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

</head>
<body>

<script>

    class EventBus {
        constructor() {
            this.handlers = {}
        }
        // ç›‘å¬ äº‹ä»¶
        $on(eventName, callback) {
            let callbackList = this.handlers[eventName];
            if (!callbackList) {
                callbackList = this.handlers[eventName] = [];
            }
            callbackList.push(callback);
        }
        // æ’¤é”€äº‹ä»¶
        $off(eventName, callback) {
            let callbackList = this.handlers[eventName];
            if (callbackList) {
                let position = callbackList.indexOf(callback);
                callbackList.splice(position, 1)
            }
        }
        // å‘é€äº‹ä»¶
        $emit(eventName, data) {
            let callbackList = this.handlers[eventName];
            if (callbackList) {
                for (let callback of callbackList) {
                    callback(data);
                }
            }
        }
    }


    let eventBus = new EventBus();

    eventBus.$on('å¼€é¥­äº†', function (event) {
        console.log(event);
    });
    eventBus.$on('å¼€é¥­äº†', function (event) {
        console.log(event);
    });


    let fn = function (event) {
        console.log(event);
    };

    eventBus.$on('å¼€é¥­äº†', fn);



    eventBus.$on('æ´—ç¢—', function (count) {
        console.log('å¼€å§‹æ´—ç¢—')
    });


    eventBus.$emit('å¼€é¥­äº†', 'ğŸšé¢æ¡')

    eventBus.$off('å¼€é¥­äº†', fn);

    eventBus.$emit('å¼€é¥­äº†', 'ğŸŒ')



    eventBus.$emit('æ´—ç¢—', 10);



</script>
</body>
</html>
